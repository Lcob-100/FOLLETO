<section id="capsula">
  <div class="container">
    <article class="capsula">
      <h2>ğŸ“¦ CÃ¡psula del Tiempo â€“ <em>Mi voz en el silencio</em></h2>
      <p><strong>â€œÂ¡Bienvenido a tu cÃ¡psula del tiempo! AquÃ­ vas a guardar una parte de ti. Imagina que estÃ¡s en un lugar donde no puedes hablar con nadie por un tiempo. Pero tienes esta cÃ¡psula mÃ¡gica para expresar lo que sientes.â€</strong></p>

      <h3>ğŸ“– Escribe tu carta</h3>
      <textarea rows="6" placeholder="Â¿QuÃ© es lo que mÃ¡s extraÃ±as? Â¿QuÃ© piensas todos los dÃ­as? Â¿QuÃ© te ayuda a sentirte mejor? Â¿QuÃ© le dirÃ­as a tu 'yo del futuro'?"></textarea>
      <button onclick="sellarCapsula()">ğŸ“© Cerrar la carta y guardarla</button>

      <h3>ğŸ¨ Dibuja tu estado de Ã¡nimo</h3>
      <canvas id="drawCanvas" height="200"></canvas>
      <div class="canvas-tools">
        <label>Color: <input type="color" id="colorPicker" value="#3d5a80"></label>
        <label>Grosor: <input type="range" id="brushSize" min="1" max="10" value="3"></label>
        <button onclick="clearCanvas()">ğŸ§¼ Borrar</button>
      </div>

      <h3>ğŸ’– Â¿CÃ³mo te sientes?</h3>
      <div class="emotion-selector">
        <span title="Triste">ğŸ˜¢</span>
        <span title="Esperanzado">ğŸ˜Š</span>
        <span title="Enojado">ğŸ˜¡</span>
        <span title="Confundido">ğŸ˜•</span>
        <span title="En calma">ğŸ˜Œ</span>
      </div>

      <button style="margin-top:2rem" onclick="sellarCapsula()">ğŸ Sellar mi cÃ¡psula</button>

      <div id="sealMessage" style="display:none; margin-top:2rem; background:#fff8e1; border:2px solid #ffcb77; padding:1rem; border-radius:8px; text-align:center; font-weight:bold;">
        Â¡Tu cÃ¡psula ha sido sellada! ğŸŒŸ Puedes volver a abrirla cuando estÃ©s listo para recordarte lo fuerte que fuiste.
      </div>
    </article>
  </div>
</section>

<style>
  .capsula {
    background: #ffffffcc;
    border-radius: 12px;
    box-shadow: 0 0 10px #bbb;
    padding: 2rem;
    max-width: 900px;
    margin: auto;
    background-color: #eaf6f6;
  }

  textarea, canvas {
    width: 100%;
    border: 2px dashed #98c1d9;
    border-radius: 8px;
    background-color: #f1faff;
    padding: 1rem;
    font-size: 1rem;
  }

  .canvas-tools, .emotion-selector {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    margin: 1rem 0;
  }

  .emotion-selector span {
    cursor: pointer;
    font-size: 2rem;
    transition: transform 0.2s;
  }

  .emotion-selector span:hover {
    transform: scale(1.2);
  }
</style>

<script>
  const canvas = document.getElementById('drawCanvas');
  const ctx = canvas.getContext('2d');
  let drawing = false;

  canvas.addEventListener('mousedown', () => drawing = true);
  canvas.addEventListener('mouseup', () => {
    drawing = false;
    ctx.beginPath();
  });
  canvas.addEventListener('mouseout', () => drawing = false);

  canvas.addEventListener('mousemove', draw);

  function draw(e) {
    if (!drawing) return;
    ctx.lineWidth = document.getElementById('brushSize').value;
    ctx.lineCap = 'round';
    ctx.strokeStyle = document.getElementById('colorPicker').value;
    const rect = canvas.getBoundingClientRect();
    ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
  }

  function clearCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  }

  function sellarCapsula() {
    document.getElementById('sealMessage').style.display = 'block';
  }
</script>
